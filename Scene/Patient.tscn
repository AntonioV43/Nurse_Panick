[gd_scene load_steps=18 format=3 uid="uid://cigneymlaf4xu"]

[ext_resource type="Script" uid="uid://ofwl0y23ruxe" path="res://script/patient.gd" id="1_mhqvh"]
[ext_resource type="PackedScene" uid="uid://2h3eqwlmbwbg" path="res://assets/Animation/Ireng.glb" id="2_b6bir"]
[ext_resource type="AnimationLibrary" uid="uid://dh5pvrj463kc0" path="res://assets/Animation/Mendem.res" id="3_868md"]
[ext_resource type="Texture2D" uid="uid://broq4qg2tv1w2" path="res://assets/textures/Bar/BG.png" id="3_b71q8"]
[ext_resource type="Texture2D" uid="uid://6h6yokoceuls" path="res://assets/textures/Bar/S.png" id="4_868md"]
[ext_resource type="Script" uid="uid://brdwrh64kl711" path="res://script/Healthbar.gd" id="4_eiev2"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_w6wah"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_868md"]
animation = &"Mendem/Idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_u82kl"]
animation = &"Mendem/Walk"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_uq18d"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_cy3vu"]
xfade_time = 0.5
advance_mode = 2
advance_condition = &"walk"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_oa8ow"]
xfade_time = 0.5
advance_mode = 2
advance_condition = &"idle"

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_868md"]
states/Mendem_Idle/node = SubResource("AnimationNodeAnimation_868md")
states/Mendem_Idle/position = Vector2(406.93018, 48)
states/Mendem_Walk/node = SubResource("AnimationNodeAnimation_u82kl")
states/Mendem_Walk/position = Vector2(593.9302, 133)
states/Start/position = Vector2(200, 116)
transitions = ["Start", "Mendem_Idle", SubResource("AnimationNodeStateMachineTransition_uq18d"), "Mendem_Idle", "Mendem_Walk", SubResource("AnimationNodeStateMachineTransition_cy3vu"), "Mendem_Walk", "Mendem_Idle", SubResource("AnimationNodeStateMachineTransition_oa8ow")]
graph_offset = Vector2(-52.069824, 0)

[sub_resource type="ViewportTexture" id="ViewportTexture_eiev2"]
viewport_path = NodePath("HealthBar3D/HPViewport")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_b71q8"]
resource_local_to_scene = true
transparency = 1
shading_mode = 0
albedo_texture = SubResource("ViewportTexture_eiev2")

[sub_resource type="QuadMesh" id="QuadMesh_eiev2"]
resource_local_to_scene = true
material = SubResource("StandardMaterial3D_b71q8")
size = Vector2(0.8, 0.1)

[sub_resource type="BoxShape3D" id="BoxShape3D_b71q8"]

[node name="Pasien" type="CharacterBody3D" node_paths=PackedStringArray("body_mesh") groups=["pasien"]]
script = ExtResource("1_mhqvh")
damage_per_second = 2
body_mesh = NodePath("Ireng/Armature/GeneralSkeleton/Ch28_Hoody")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
shape = SubResource("CapsuleShape3D_w6wah")

[node name="NavigationAgent3D" type="NavigationAgent3D" parent="."]

[node name="Ireng" parent="." instance=ExtResource("2_b6bir")]
transform = Transform3D(1.2, 0, 0, 0, 1.2, 0, 0, 0, 1.2, 0, 0, 0)

[node name="GeneralSkeleton" parent="Ireng/Armature" index="0"]
bones/0/position = Vector3(0.034743376, 0.9495027, -0.025102533)
bones/0/rotation = Quaternion(-0.024908997, -0.18071067, -0.05169966, 0.9818607)
bones/1/rotation = Quaternion(0.0704994, 0.027499763, -0.04722642, 0.9960137)
bones/2/rotation = Quaternion(0.019082356, 0.008733252, -0.0056042434, 0.9997641)
bones/3/rotation = Quaternion(0.019027768, 0.008684096, -0.005574781, 0.9997657)
bones/4/rotation = Quaternion(0.032636475, -0.0001423115, 0.007819274, 0.99943674)
bones/5/rotation = Quaternion(0.032627124, 6.0233957e-05, 0.007921557, 0.99943626)
bones/7/rotation = Quaternion(0.49224544, 0.46581385, 0.6028388, -0.42106694)
bones/8/rotation = Quaternion(-0.014902629, 0.8746292, -0.4842329, 0.017892282)
bones/9/rotation = Quaternion(0.06805226, -0.7038246, 0.06805225, 0.70382446)
bones/10/rotation = Quaternion(-0.07450208, 0.79116064, -0.0194057, 0.6067436)
bones/11/rotation = Quaternion(-0.26678368, 0.68482506, 0.23878013, 0.63468516)
bones/12/rotation = Quaternion(0.14946395, 0.17438114, -0.011692578, 0.9731984)
bones/13/rotation = Quaternion(0.034527358, -0.02047709, -0.20084427, 0.9788004)
bones/15/rotation = Quaternion(0.13709858, -0.0013800567, 0.017159022, 0.9904078)
bones/16/rotation = Quaternion(0.1030911, -3.6547004e-08, -0.010564374, 0.99461585)
bones/17/rotation = Quaternion(0.012411678, 7.4505806e-08, -0.0012720316, 0.99992216)
bones/19/rotation = Quaternion(0.18517861, -0.0054256395, -0.027799917, 0.98229665)
bones/20/rotation = Quaternion(0.13391526, 7.320139e-09, -0.013723153, 0.99089783)
bones/21/rotation = Quaternion(0.073330596, 1.0404727e-08, -0.007514653, 0.9972794)
bones/23/rotation = Quaternion(0.26072833, 0.008760169, -0.095914654, 0.96059585)
bones/24/rotation = Quaternion(0.12204732, -5.5108217e-08, -0.012506977, 0.99244547)
bones/25/rotation = Quaternion(0.12587112, 2.5680599e-08, -0.012898912, 0.99196273)
bones/27/rotation = Quaternion(0.27222866, 0.026711665, -0.16080791, 0.9483243)
bones/28/rotation = Quaternion(0.1499888, -5.7918488e-08, -0.015370425, 0.9885682)
bones/29/rotation = Quaternion(0.22650106, -4.413876e-08, -0.023211107, 0.97373444)
bones/31/rotation = Quaternion(0.5261944, -0.44668832, -0.58367276, -0.42768577)
bones/32/rotation = Quaternion(-0.097805314, 0.84122264, -0.530411, 0.037985124)
bones/33/rotation = Quaternion(0.08049597, 0.7025101, -0.08049606, 0.7025101)
bones/34/rotation = Quaternion(-0.09582092, -0.61634004, -0.14237592, 0.76855224)
bones/35/rotation = Quaternion(-0.26797283, -0.6464434, -0.2661168, 0.6629353)
bones/36/rotation = Quaternion(0.24338493, -0.17834446, -0.016475055, 0.95325005)
bones/37/rotation = Quaternion(0.12922035, 0.012099535, 0.16399457, 0.9778863)
bones/39/rotation = Quaternion(0.017771984, 0.00044051194, -0.034468606, 0.99924767)
bones/40/rotation = Quaternion(0.13967286, 8.4910724e-08, 0.011378135, 0.9901324)
bones/41/rotation = Quaternion(0.078718185, -1.939765e-08, 0.0064125257, 0.99687636)
bones/43/rotation = Quaternion(0.13755442, 0.0058154757, 0.0055037225, 0.9904618)
bones/44/rotation = Quaternion(0.196187, -1.5042392e-07, 0.015981887, 0.98043627)
bones/45/rotation = Quaternion(0.18412423, 2.2482189e-08, 0.014999113, 0.9827886)
bones/47/rotation = Quaternion(0.21035433, -0.0015052514, 0.060984112, 0.9757202)
bones/48/rotation = Quaternion(0.2344303, -4.104345e-08, 0.019097269, 0.9719454)
bones/49/rotation = Quaternion(0.22247307, -1.3552234e-07, 0.018123228, 0.97477037)
bones/51/rotation = Quaternion(0.2989588, -0.0040166466, 0.10824056, 0.9480989)
bones/52/rotation = Quaternion(0.2576856, 1.798575e-08, 0.020991739, 0.9660008)
bones/53/rotation = Quaternion(0.2812697, 1.7149393e-08, 0.022912804, 0.9593552)
bones/55/rotation = Quaternion(0.0841601, 0.08415892, 0.99049497, -0.06895019)
bones/56/rotation = Quaternion(-0.0531091, 0.96271, -0.25565782, 0.07076785)
bones/57/rotation = Quaternion(0.07067113, 0.5990098, -0.7724985, 0.19859266)
bones/58/rotation = Quaternion(8.654335e-09, 0.99888146, 0.047284637, 1.6165544e-08)
bones/60/rotation = Quaternion(-0.07378057, 0.043579254, 0.99566585, 0.03615223)
bones/61/rotation = Quaternion(-0.05743843, 0.9929635, -0.083448716, 0.061325207)
bones/62/rotation = Quaternion(0.01832369, 0.7022488, -0.7088785, -0.063262366)
bones/63/rotation = Quaternion(6.503874e-08, 0.99714553, 0.07550352, -3.201453e-08)

[node name="AnimationPlayer" type="AnimationPlayer" parent="Ireng"]
libraries = {
&"Mendem": ExtResource("3_868md")
}

[node name="AnimationTree" type="AnimationTree" parent="." groups=["npc"]]
root_node = NodePath("../Ireng")
tree_root = SubResource("AnimationNodeStateMachine_868md")
anim_player = NodePath("../Ireng/AnimationPlayer")
parameters/conditions/idle = false
parameters/conditions/walk = false

[node name="HPTimer" type="Timer" parent="."]

[node name="HealthBar3D" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.3, 0)

[node name="HPViewport" type="SubViewport" parent="HealthBar3D"]
transparent_bg = true
size = Vector2i(200, 40)

[node name="HealthBar" type="TextureProgressBar" parent="HealthBar3D/HPViewport"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
value = 50.0
nine_patch_stretch = true
texture_under = ExtResource("3_b71q8")
texture_progress = ExtResource("4_868md")
script = ExtResource("4_eiev2")

[node name="HealthBarMesh" type="MeshInstance3D" parent="HealthBar3D"]
mesh = SubResource("QuadMesh_eiev2")

[node name="Sensor_Ambil" type="Area3D" parent="."]
transform = Transform3D(0.43308026, 0, 0, 0, 1, 0, 0, 0, 0.59512407, 0, 1.0676198, 0.2907225)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Sensor_Ambil"]
transform = Transform3D(2, 0, 0, 0, 2, 0, 0, 0, 2, 0, 0, 0)
shape = SubResource("BoxShape3D_b71q8")

[connection signal="body_entered" from="Sensor_Ambil" to="." method="_on_sensor_ambil_body_entered"]
[connection signal="body_exited" from="Sensor_Ambil" to="." method="_on_sensor_ambil_body_exited"]

[editable path="Ireng"]
